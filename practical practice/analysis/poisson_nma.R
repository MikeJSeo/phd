# poisson
library(RCurl)
library(rjags)

r = matrix(c(
  70,  32,  70,  45,  32,  45, 302, 154, 302, 119, 
  154, 119,   8,   1, 200, 138, 799, 567, 380, 337, 
  202, 163, 489, 449,  20,  29, 154, 177,  86,  75, 
  155, 102, 176, 136, 665, 569, 320, 242,  34,  37, 
  34,  43,  37,  43, 251, 216, 399, 335, 115,  93, 
  118, 140,  97,  95,  97,  93,  95,  93, 845, 690), nrow = 30, ncol = 2, byrow = TRUE)
  
E = matrix(c(
  40500, 20200, 40500, 41000, 20200, 41000,676600,395400,676600,409600, 
  395400,409600, 19600, 19600,282600,280000,704000,707200,523000,518300, 
  272100,271500,264600,262300, 42400, 41600,487000,484100,329700,327200, 
  288300,283700,251100,250800,807800,809800,397900,402000,221300,110200, 
  221300,108100,110200,108100,505900,509500,347200,343200,217500,216700, 
  157800,163100,196000,196500,196000,197000,196500,197000,507400,508700), nrow = 30, ncol = 2, byrow = TRUE)

t= matrix(c(
  2,   4,   2,   5,   4,   5,   3,   4,   3,   5, 
  4,   5,   3,   6,   3,   5,   2,   4,   2,   5, 
  1,   6,   1,   5,   1,   3,   1,   4,   2,   3, 
  1,   5,   3,   4,   2,   4,   2,   6,   1,   2, 
  1,   3,   2,   3,   2,   4,   1,   5,   1,   6, 
  1,   3,   2,   4,   2,   5,   4,   5,   4,   6), nrow = 30, ncol = 2, byrow = TRUE)

data_jags <- list(ns = 30 , nt=6, ref=1, r=r, t=t, E = E) #need n?

url <- "https://raw.githubusercontent.com/MikeJSeo/jags/master/code/poisson_nma.txt"
data <- getURL(url)

model <- jags.model(textConnection(data), data = data_jags)
samples <- coda.samples(model, variable.names = c("d"), n.iter = 50000)
summary(samples) 

