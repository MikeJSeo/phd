model{

#Note that in this code baseline treatment is always present in all trials and so code can be simplified
#likelihood
y1 ~ dmnorm(Mu1, Omega1)
y2 ~ dmnorm(Mu2, Omega2)
y3 ~ dmnorm(Mu3, Omega3)
y4 ~ dmnorm(Mu4, Omega4)

Omega1 <- inverse(Sigma1)
Omega2 <- inverse(Sigma2)
Omega3 <- inverse(Sigma3)
Omega4 <- inverse(Sigma4)

Mu1 <- c(gamma[1,], gamma[2,], delta_3a[1, 1:2])
Mu2 <- c(gamma[1,], gamma[2,], delta_3a[2, 1:2])
Mu3 <- c(gamma[1,], delta[1])
Mu4 <- c(gamma[2,], delta[2])

#parameters
for(i in 1:9){
	gamma[1,i] ~ dnorm(0, 0.001)
	gamma[2,i] ~ dnorm(0, 0.001)
}

delta[1] ~ dnorm(d[1], prec)
delta[2] ~ dnorm(d[2], prec)

prec <- 1/(tau*tau)
tau ~ dunif(0,2)

delta_3a[1,1:2] ~ dmnorm(theta[1:2], prec.3a[1:2,1:2])
delta_3a[2,1:2] ~ dmnorm(theta[1:2], prec.3a[1:2,1:2])

theta[1] <- d[1] 
theta[2] <- d[2] 

prec.3a[1,1] <- 1.33*prec
prec.3a[2,2] <- prec.3a[1,1]
prec.3a[1,2] <- (-0.67*prec)
prec.3a[2,1] <- prec.3a[1,2]

d[1] ~ dnorm(0, 0.001)
d[2] ~ dnorm(0, 0.001)


}